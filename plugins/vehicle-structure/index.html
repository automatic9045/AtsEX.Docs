<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no,address=no,email=no" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0" />
    <meta name="theme-color" content="#fff" />

    <meta name="author" content="automatic9045" />
    <meta property="og:site_name" content="自列車ストラクチャープラグイン - AtsEX - 岡オカ営業所" />
    <meta property="og:title" content="自列車ストラクチャープラグイン - AtsEX - 岡オカ営業所" />
    <meta property="og:description" content="自列車の動きに追随するストラクチャーを設置するプラグインです。BveEX車両プラグインとして実装されています。" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://www.okaoka-depot.com/AtsEX.Docs/img/ogp.png" />
    <meta property="og:locale" content="ja_JP" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@atF9045" />

    <title>自列車ストラクチャープラグイン - AtsEX - 岡オカ営業所</title>
    <base href="https://www.okaoka-depot.com/AtsEX.Docs/" />
    <link rel="icon" type="image/svg+xml" href="../img/bus.svg">
    <link rel="apple-touch-icon" type="image/png" href="../img/bus.png">
    <link rel="stylesheet" type="text/css" href="css/basic.css" />
    <link rel="stylesheet" type="text/css" href="css/header.css" />
    <link rel="stylesheet" type="text/css" href="css/footer.css" />
    <link rel="stylesheet" type="text/css" href="copyright/highlight/vs2015.min.css">
    <script type="text/javascript" src="../js/busses.js"></script>
    <script type="text/javascript" src="js/basic.js"></script>
    <script type="text/javascript" src="js/copyright.js"></script>
    <script type="text/javascript" src="js/sns.js"></script>
    <script type="text/javascript" src="copyright/highlight/highlight.min.js"></script>
</head>
<body>
    <header class="header">
        <script>includeByClasses("header.html", "header", 0);</script>
    </header>
    <div id="content">
        <div class="subheader-image">
            <img src="plugins/vehicle-structure/header.jpg" />
            <span>Vehicle Structure</span>
        </div>
        <section class="title-with-description">
            <h1>自列車ストラクチャープラグイン</h1>
            <p>
                自列車の動きに追随するストラクチャーを設置するプラグインです。<br />
                <strong>BveEX車両プラグイン</strong>として実装されています。
            </p>
        </section>
        <section>
            <h2>プラグインの特長</h2>
            <p>
                ストラクチャーはプラグインから動的に読み込まれる仕様ですので、路線データにストラクチャーを同梱する必要はありません。
                車両データにストラクチャーを同梱することで、<mark>路線データには全く依存せず</mark>動作させることが可能です。
            </p>
            <p>

                また、車両のストラクチャーは<mark>車体の揺れに合わせた振動</mark>に対応。
                一部分のみを振動させることもできるので、例えば「車体は振動させるが、台車は振動させない」といったように組み合わせて使用することもできます。
            </p>
            <div class="note note-warn">
                <p>
                    本プラグインで追加される自列車ストラクチャーは、ミラーやカメラなどに映り込ませるためのものです。<br />
                    自列車の外観を直接眺める用途は想定していませんので、その点ご留意の上でご使用ください。
                </p>
            </div>
        </section>
        <div class="white-space"></div>
        <div class="gray">
            <section>
                <h2>プラグインをデータに組み込む手順</h2>
                <h3>1. プラグインを車両に配置する</h3>
                <p>
                    下のボタンよりダウンロードしたファイルを<strong>ゾーン識別子を削除した上で</strong>解凍し、車両ファイル（Vehicle.txtなど）に対する位置関係が次の画像のようになるように配置します。
                </p>
                <p>
                    <img src="plugins/vehicle-structure/locating.png" /><br />
                    <small>※「AtsExPlugins」フォルダは「BveExPlugins」と読み替えてください。</small>
                </p>
                <div class="note note-warn">
                    <h4>ゾーン識別子の削除を忘れずに！</h4>
                    <p>
                        この手順を飛ばしたままパッケージを解凍してしまうと、不可解なエラーの原因となる場合があります。<br />
                        そのままパッケージを解凍し、プラグインを配置してしまった場合は、ゾーン識別子を削除した上でもう一度解凍からやり直してください。
                    </p>
                    <p>
                        ゾーン識別子を削除する方法については、<a href="download/installation-guide/other.html">手動でのパッケージの適用方法 - AtsEXインストールガイド</a>の「1-1. ゾーン識別子を削除する」をご参照ください。
                    </p>
                </div>
                <div class="note note-info">
                    <h4>既にVehiclePluginUsing.xmlなどのBveEX車両プラグインリストファイルが存在する場合</h4>
                    <p>
                        本プラグインに同梱のVehiclePluginUsing.xmlは使用せず、既存のプラグインリストファイルに以下のコードを追記してください。
                    </p>
                    <pre><code class="language-xml">&lt;Assembly Path="BveExPlugins\VehicleStructure.dll" /></code></pre>
                </div>

                <h3>2. 車両ストラクチャーを配置し、設定ファイルに記述する</h3>
                <p>
                    自列車ストラクチャーとして使用するストラクチャーを車両データ内に配置し、その設定をVehicleStructure.Config.xmlに記述します。<br />
                    設定ファイルの文法は以下を参照してください。
                </p>

                <h2>設定ファイルの文法</h2>
                <h3 class="header-accent">コードの例</h3>
                <pre><code id="config-sample" class="language-xml"></code></pre>
                <script>includeById("plugins/vehicle-structure/config-sample.txt", "config-sample");</script>

                <h3 class="header-accent">各要素・属性の解説</h3>
                <table class="with-border scrollable">
                    <tr>
                        <th>要素・属性</th>
                        <th>初期値</th>
                        <th>内容</th>
                    </tr>
                    <tr>
                        <td colspan="3">DoorAnimations → DoorAnimation（要素）</td>
                    </tr>
                    <tr>
                        <td>├ Key</td>
                        <td>-</td>
                        <td>アニメーションのキー。Door要素のAnimationKey属性から参照される</td>
                    </tr>
                    <tr>
                        <td colspan="3">└ OpenDiagram・CloseDiagram（要素）</td>
                    </tr>
                    <tr>
                        <td colspan="2">　└ （各属性・子要素）</td>
                        <td>アニメーションの方法を定義。<s>詳細は<a href="plugins/vehicle-structure/door-animation.html">こちら</a>で解説</s> 準備中</td>
                    </tr>
                    <tr>
                        <td colspan="3">VehicleTrain → StructureGroups → StructureGroup（要素）</td>
                    </tr>
                    <tr>
                        <td>├ Vibrate</td>
                        <td>false</td>
                        <td>このグループのストラクチャーを、自列車の揺れに合わせて振動させるか。<span class="wbr"><br /></span><code>true</code>で振動させる、<code>false</code>で振動させない</td>
                    </tr>
                    <tr>
                        <td>├ FirstStructureFront</td>
                        <td>0</td>
                        <td>（<code>Vibrate="true"</code>の場合のみ）<span class="wbr"><br /></span>自列車原点から車両3Dモデルの原点までの符号付き距離 [m]</td>
                    </tr>
                    <tr>
                        <td colspan="3">└ Structure（要素）</td>
                    </tr>
                    <tr>
                        <td>　├ Model</td>
                        <td>-</td>
                        <td>車両3Dモデルの相対パス</td>
                    </tr>
                    <tr>
                        <td>　├ Distance</td>
                        <td>0</td>
                        <td>他列車ファイルの同名キーに対応。<span class="wbr"><br /></span>他列車原点から後側軌道交点（台車中心など）までの符号付き距離 [m]</td>
                    </tr>
                    <tr>
                        <td>　├ Span</td>
                        <td>0</td>
                        <td>他列車ファイルの同名キーに対応。<span class="wbr"><br /></span>後側軌道交点と前側軌道交点の間の符号付き距離 [m]</td>
                    </tr>
                    <tr>
                        <td>　├ Z</td>
                        <td>0</td>
                        <td>他列車ファイルの同名キーに対応。<span class="wbr"><br /></span>後側軌道交点から車両3Dモデル原点までの符号付き距離 [m]</td>
                    </tr>
                    <tr>
                        <td colspan="3">　└ Doors → Door（要素）</td>
                    </tr>
                    <tr>
                        <td>　　├ Model</td>
                        <td>-</td>
                        <td>ドア3Dモデルの相対パス</td>
                    </tr>
                    <tr>
                        <td>　　├ X</td>
                        <td>0</td>
                        <td>車両3Dモデルの原点を基準とした、ドア3DモデルのX座標 [m]</td>
                    </tr>
                    <tr>
                        <td>　　├ Y</td>
                        <td>0</td>
                        <td>車両3Dモデルの原点を基準とした、ドア3DモデルのY座標 [m]</td>
                    </tr>
                    <tr>
                        <td>　　├ Z</td>
                        <td>0</td>
                        <td>車両3Dモデルの原点を基準とした、ドア3DモデルのZ座標 [m]</td>
                    </tr>
                    <tr>
                        <td>　　├ Side</td>
                        <td>Left</td>
                        <td>どちら側のドアか。<code>Left</code>か<code>Right</code>で指定</td>
                    </tr>
                    <tr>
                        <td>　　├ OpenWidth</td>
                        <td>0</td>
                        <td>ドアが完全に開き切ったときの符号付き移動距離 [m]</td>
                    </tr>
                    <tr>
                        <td>　　└ AnimationKey</td>
                        <td>-</td>
                        <td>このドアに適用するアニメーションのキー。<span class="wbr"><br /></span>キーが見つからない場合は既定のアニメーションを使用</td>
                    </tr>
                </table>

                <div class="note note-info">
                    他列車ファイルの文法については、<a href="https://bvets.net/jp/edit/formats/" target="_blank">BVE公式のリファレンス</a>も参考にしてください。
                </div>
            </section>
        </div>
        <section>
            <h2>ライセンス</h2>
            <p>
                本ソフトウェアは、<a href="https://github.com/automatic9045/BveEx.Plugins.VehicleStructure/blob/main/LICENSE.md">PolyForm Noncommercial License 1.0.0</a>のもとで使用を許諾されています。<br />
                このライセンスにおいて許可されない方法での使用を希望される場合は、個別対応となりますので、お問い合わせください。
            </p>

            <h2>ダウンロード</h2>
            <p class="center">
                <a class="button with-border white-when-hover" href="https://github.com/automatic9045/BveEx.Plugins.VehicleStructure/releases/">
                    GitHubからダウンロード▶
                </a>
            </p>
        </section>

        <script>hljs.highlightAll();</script>
    </div>
    <footer class="footer">
        <script>includeByClasses("footer.html", "footer", 0);</script>
    </footer>
</body>
</html>